================================================================================
API TEST CALLS - AI Financial Advisor & Risk Predictor
================================================================================

Make sure the Flask server is running on http://localhost:5000 before testing.
You can use curl, Postman, or any HTTP client to test these endpoints.

================================================================================
1. HEALTH CHECK ENDPOINT
================================================================================

GET /api/health
- Tests if the API is running and returns available endpoints

curl http://localhost:5000/api/health

Expected Response:
{
  "status": "ok",
  "endpoints": {
    "predict": "/api/predict",
    "sentiment": "/api/sentiment",
    "risk": "/api/risk"
  }
}

================================================================================
2. PREDICT ENDPOINT - Stock Price Prediction
================================================================================

2.1 Basic Prediction (7 days - default)
GET /api/predict?ticker=AAPL

curl "http://localhost:5000/api/predict?ticker=AAPL"

Expected Response:
{
  "ticker": "AAPL",
  "current_price": 150.25,
  "predictions": [150.30, 150.45, ...],
  "prediction_dates": ["2025-01-15", "2025-01-16", ...],
  "historical_dates": ["2024-12-15", ...],
  "historical_prices": [148.50, ...]
}

2.2 Custom Prediction Period (14 days)
GET /api/predict?ticker=TSLA&days=14

curl "http://localhost:5000/api/predict?ticker=TSLA&days=14"

2.3 Different Stock (GOOGL)
GET /api/predict?ticker=GOOGL&days=7

curl "http://localhost:5000/api/predict?ticker=GOOGL&days=7"

2.4 Edge Cases - Invalid Ticker
GET /api/predict?ticker=INVALID123

curl "http://localhost:5000/api/predict?ticker=INVALID123"

Expected Response: 404 with error message

2.5 Edge Cases - Missing Ticker
GET /api/predict

curl "http://localhost:5000/api/predict"

Expected Response: 400 with "Ticker symbol required"

2.6 Edge Cases - Invalid Days Parameter
GET /api/predict?ticker=AAPL&days=50

curl "http://localhost:5000/api/predict?ticker=AAPL&days=50"

Expected Response: 400 with "Days must be between 1 and 30"

2.7 Edge Cases - Negative Days
GET /api/predict?ticker=AAPL&days=-5

curl "http://localhost:5000/api/predict?ticker=AAPL&days=-5"

Expected Response: 400 with error

================================================================================
3. SENTIMENT ENDPOINT - Financial News Sentiment Analysis
================================================================================

3.1 Basic Sentiment Analysis (default: 10 articles, 7 days)
GET /api/sentiment?ticker=AAPL

curl "http://localhost:5000/api/sentiment?ticker=AAPL"

Expected Response:
{
  "ticker": "AAPL",
  "per_article": [
    {
      "title": "Apple announces new product...",
      "description": "...",
      "url": "...",
      "source": "...",
      "published_at": "...",
      "sentiment": {
        "label": "positive",
        "score": 0.87
      }
    },
    ...
  ],
  "overall": {
    "label": "positive",
    "score": 0.72
  }
}

3.2 Custom Limit (5 articles)
GET /api/sentiment?ticker=TSLA&limit=5

curl "http://localhost:5000/api/sentiment?ticker=TSLA&limit=5"

3.3 Custom Days Back (14 days)
GET /api/sentiment?ticker=GOOGL&days_back=14

curl "http://localhost:5000/api/sentiment?ticker=GOOGL&days_back=14"

3.4 Combined Parameters
GET /api/sentiment?ticker=MSFT&limit=20&days_back=3

curl "http://localhost:5000/api/sentiment?ticker=MSFT&limit=20&days_back=3"

3.5 Edge Cases - Invalid Ticker
GET /api/sentiment?ticker=XYZ123

curl "http://localhost:5000/api/sentiment?ticker=XYZ123"

Expected Response: 400 with validation error

3.6 Edge Cases - Missing Ticker
GET /api/sentiment

curl "http://localhost:5000/api/sentiment"

Expected Response: 400 with "Ticker symbol required"

3.7 Edge Cases - Invalid Limit (too high)
GET /api/sentiment?ticker=AAPL&limit=100

curl "http://localhost:5000/api/sentiment?ticker=AAPL&limit=100"

Expected Response: 400 with "Limit must be between 1 and 50"

3.8 Edge Cases - Invalid Days Back
GET /api/sentiment?ticker=AAPL&days_back=50

curl "http://localhost:5000/api/sentiment?ticker=AAPL&days_back=50"

Expected Response: 400 with "Days back must be between 1 and 30"

3.9 Edge Cases - No News Found
GET /api/sentiment?ticker=OBSCURETICKER

curl "http://localhost:5000/api/sentiment?ticker=OBSCURETICKER"

Expected Response: 200 with empty per_article array and message

================================================================================
4. RISK ENDPOINT - Risk Assessment & Investment Recommendation
================================================================================

4.1 Basic Risk Assessment (default: 30 days)
GET /api/risk?ticker=AAPL

curl "http://localhost:5000/api/risk?ticker=AAPL"

Expected Response:
{
  "ticker": "AAPL",
  "current_price": 150.25,
  "volatility": 0.012345,
  "risk_level": "Medium",
  "short_term_trend": 0.001234,
  "recommendation": "Buy",
  "sentiment_score_used": 0.72
}

4.2 Custom Analysis Period (60 days)
GET /api/risk?ticker=TSLA&days=60

curl "http://localhost:5000/api/risk?ticker=TSLA&days=60"

4.3 Short-term Analysis (14 days)
GET /api/risk?ticker=GOOGL&days=14

curl "http://localhost:5000/api/risk?ticker=GOOGL&days=14"

4.4 Long-term Analysis (90 days)
GET /api/risk?ticker=MSFT&days=90

curl "http://localhost:5000/api/risk?ticker=MSFT&days=90"

4.5 Edge Cases - Invalid Ticker
GET /api/risk?ticker=INVALID

curl "http://localhost:5000/api/risk?ticker=INVALID"

Expected Response: 404 with error message

4.6 Edge Cases - Missing Ticker
GET /api/risk

curl "http://localhost:5000/api/risk"

Expected Response: 400 with "Ticker symbol required"

4.7 Edge Cases - Days Too Low
GET /api/risk?ticker=AAPL&days=5

curl "http://localhost:5000/api/risk?ticker=AAPL&days=5"

Expected Response: 400 with "Days must be between 7 and 365"

4.8 Edge Cases - Days Too High
GET /api/risk?ticker=AAPL&days=500

curl "http://localhost:5000/api/risk?ticker=AAPL&days=500"

Expected Response: 400 with "Days must be between 7 and 365"

================================================================================
5. COMPREHENSIVE TEST SCENARIOS
================================================================================

5.1 Full Workflow Test - Complete Analysis for a Stock
Step 1: Get predictions
curl "http://localhost:5000/api/predict?ticker=AAPL&days=7"

Step 2: Get sentiment
curl "http://localhost:5000/api/sentiment?ticker=AAPL&limit=10"

Step 3: Get risk assessment
curl "http://localhost:5000/api/risk?ticker=AAPL&days=30"

5.2 Multiple Stocks Comparison
Stock 1: AAPL
curl "http://localhost:5000/api/predict?ticker=AAPL"
curl "http://localhost:5000/api/sentiment?ticker=AAPL"
curl "http://localhost:5000/api/risk?ticker=AAPL"

Stock 2: TSLA
curl "http://localhost:5000/api/predict?ticker=TSLA"
curl "http://localhost:5000/api/sentiment?ticker=TSLA"
curl "http://localhost:5000/api/risk?ticker=TSLA"

Stock 3: GOOGL
curl "http://localhost:5000/api/predict?ticker=GOOGL"
curl "http://localhost:5000/api/sentiment?ticker=GOOGL"
curl "http://localhost:5000/api/risk?ticker=GOOGL"

5.3 Edge Case - Lowercase Ticker (should be converted to uppercase)
curl "http://localhost:5000/api/predict?ticker=aapl"
curl "http://localhost:5000/api/sentiment?ticker=tsla"
curl "http://localhost:5000/api/risk?ticker=googl"

5.4 Edge Case - Ticker with Spaces (should be trimmed)
curl "http://localhost:5000/api/predict?ticker= AAPL "
curl "http://localhost:5000/api/sentiment?ticker= TSLA "
curl "http://localhost:5000/api/risk?ticker= GOOGL "

================================================================================
6. TESTING WITH BROWSER
================================================================================

You can also test these endpoints directly in your browser:

Health Check:
http://localhost:5000/api/health

Predict:
http://localhost:5000/api/predict?ticker=AAPL
http://localhost:5000/api/predict?ticker=TSLA&days=14

Sentiment:
http://localhost:5000/api/sentiment?ticker=AAPL
http://localhost:5000/api/sentiment?ticker=TSLA&limit=5&days_back=14

Risk:
http://localhost:5000/api/risk?ticker=AAPL
http://localhost:5000/api/risk?ticker=TSLA&days=60

================================================================================
7. TESTING WITH PYTHON REQUESTS
================================================================================

You can also create a Python script to test:

import requests

BASE_URL = "http://localhost:5000"

# Test health
response = requests.get(f"{BASE_URL}/api/health")
print("Health:", response.json())

# Test predict
response = requests.get(f"{BASE_URL}/api/predict", params={"ticker": "AAPL", "days": 7})
print("Predict:", response.json())

# Test sentiment
response = requests.get(f"{BASE_URL}/api/sentiment", params={"ticker": "AAPL", "limit": 10})
print("Sentiment:", response.json())

# Test risk
response = requests.get(f"{BASE_URL}/api/risk", params={"ticker": "AAPL", "days": 30})
print("Risk:", response.json())

================================================================================
8. EXPECTED STATUS CODES
================================================================================

Success:
- 200 OK: Request successful

Client Errors:
- 400 Bad Request: Invalid parameters (missing ticker, invalid range, etc.)
- 404 Not Found: Invalid ticker symbol or no data available
- 500 Internal Server Error: Server-side error (prediction failed, API error, etc.)

================================================================================
9. NOTES
================================================================================

- Make sure NEWS_API_KEY environment variable is set for sentiment endpoint
- Some endpoints may take a few seconds to respond (especially sentiment analysis)
- The sentiment endpoint requires internet connection to fetch news
- Risk endpoint will work even if sentiment analysis fails (graceful degradation)
- All ticker symbols are automatically converted to uppercase
- All endpoints support CORS for frontend integration

================================================================================
10. QUICK TEST CHECKLIST
================================================================================

[ ] Health endpoint returns 200 OK
[ ] Predict endpoint works with valid ticker (AAPL, TSLA, GOOGL)
[ ] Predict endpoint returns error for invalid ticker
[ ] Sentiment endpoint works with valid ticker
[ ] Sentiment endpoint handles missing NEWS_API_KEY gracefully
[ ] Risk endpoint works with valid ticker
[ ] Risk endpoint returns proper risk levels (Low/Medium/High)
[ ] Risk endpoint returns proper recommendations (Buy/Hold/Sell)
[ ] All endpoints validate input parameters
[ ] All endpoints return proper error messages
[ ] CORS is enabled (test from browser console)

================================================================================

